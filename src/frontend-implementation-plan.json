{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Publish latest Android APK at /downloads/word-hunt-latest.apk",
  "requirements": [
    {
      "id": "REQ-40",
      "summary": "Ensure the one-command Android APK build produces a deterministic artifact and publishes a copy that the deployed web app serves at /downloads/word-hunt-latest.apk, with the in-app Download APK control visible when available.",
      "acceptanceCriteria": [
        "Running `frontend/scripts/build-android-apk.sh` completes successfully for the intended build type (debug by default).",
        "A deterministic APK artifact exists under `frontend/android-apk-output/` (e.g., `word-hunt-debug.apk` for debug builds).",
        "A published copy exists at `frontend/dist/downloads/word-hunt-latest.apk` after the build completes.",
        "A published copy exists at `frontend/public/downloads/word-hunt-latest.apk` so future web builds include the latest APK.",
        "When the deployed site is updated with the new build output, requesting `GET /downloads/word-hunt-latest.apk` returns `200 OK` (or `206 Partial Content` when requested with a Range header).",
        "In the app UI header, the download control labeled in English (“Download APK” / “APK”) becomes visible (i.e., the runtime APK availability check succeeds)."
      ],
      "file_operations": [
        {
          "path": "frontend/scripts/build-android-apk.sh",
          "operation": "modify",
          "description": "Harden the existing one-command APK build/publish flow to reliably (1) produce the deterministic artifact under `frontend/android-apk-output/` and (2) publish/overwrite `word-hunt-latest.apk` into BOTH `frontend/dist/downloads/` (for immediate deployment) and `frontend/public/downloads/` (to be included in future web builds), with clear failure messages if either publish step fails."
        },
        {
          "path": "frontend/public/downloads/.gitkeep",
          "operation": "modify",
          "description": "Keep the public downloads directory tracked and update/confirm directory notes (if any) so `frontend/public/downloads/` remains present for bundling `word-hunt-latest.apk` into future builds."
        },
        {
          "path": "frontend/src/components/game/WordHuntScreen.tsx",
          "operation": "modify",
          "description": "Ensure the runtime APK availability check remains robust for static hosting (HEAD fallback to Range GET) and that the header shows the English-labeled download control (“Download APK” / “APK”) when `/downloads/word-hunt-latest.apk` is available. Verify the component's usage instructions before implementing."
        }
      ]
    }
  ]
}