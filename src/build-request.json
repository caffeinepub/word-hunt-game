{
  "kind": "build_request",
  "title": "Package current draft into a new Android APK and publish it for download",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-40",
      "text": "Generate a fresh Android APK for the current deployed draft using the repository’s existing one-command build script, and ensure the resulting APK is published so the deployed web app serves it at `/downloads/word-hunt-latest.apk`.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "package this draft into a new APK for download"
        ]
      },
      "acceptanceCriteria": [
        "Running `frontend/scripts/build-android-apk.sh` completes successfully for the intended build type (debug by default).",
        "A deterministic APK artifact exists under `frontend/android-apk-output/` (e.g., `word-hunt-debug.apk` for debug builds).",
        "A published copy exists at `frontend/dist/downloads/word-hunt-latest.apk` after the build completes.",
        "A published copy exists at `frontend/public/downloads/word-hunt-latest.apk` so future web builds include the latest APK.",
        "When the deployed site is updated with the new build output, requesting `GET /downloads/word-hunt-latest.apk` returns `200 OK` (or `206 Partial Content` when requested with a Range header).",
        "In the app UI header, the download control labeled in English (“Download APK” / “APK”) becomes visible (i.e., the runtime APK availability check succeeds)."
      ]
    }
  ],
  "constraints": [
    "Do not introduce new backend services or change the Motoko backend; APK packaging must use the existing Capacitor + Gradle project under `frontend/android/`.",
    "Do not modify files under `frontend/src/hooks/useInternetIdentity.ts`, `frontend/src/hooks/useInternetIdentity.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`, or anything in `frontend/src/components/ui` (compose these components only).",
    "Keep the public download URL path exactly `/downloads/word-hunt-latest.apk` and keep user-facing text in English."
  ],
  "nonGoals": [
    "Implementing new gameplay features or UI redesign unrelated to APK packaging.",
    "Adding third-party distribution channels (Play Store publishing) or external hosting for the APK."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}